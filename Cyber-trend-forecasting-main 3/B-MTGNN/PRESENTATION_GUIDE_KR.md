# 발표용 정리 (KR) - B-MTGNN 환율 실험

## 0. 한 줄 결론
현재 코드/실험 설정은 "US/JP/KR 환율 중심 예측"이라는 연구 목적에 대체로 맞게 정리되어 있으며, 평가 공정성(미래정보 누수 방지, teacher forcing 배제)도 이전보다 명확해졌습니다.

---

## 1. 연구 목적과 정합성 점검

### 잘 맞는 부분
1) **대상 범위 정리**
- 그래프에서 CN/UK 환율 노드를 제외하고 US/JP/KR + 보조 변수 중심으로 학습함.
- 목적(핵심 3개국 환율 예측 집중)과 일치.

2) **평가 구간 분리 명확화**
- Validation: 2024년
- Testing: 2025년
- 시계열 평가에서 "기간 고정"을 통해 비교 기준을 명확히 함.

3) **평가 공정성 개선**
- Validation/Testing에서 recursive rollout 강제.
- 실제값을 다음 입력으로 넣는 teacher forcing 평가를 차단하여, 실제 운영 상황과 더 유사한 검증이 가능.

4) **데이터 누수 완화**
- 정규화 스케일 계산을 학습 구간 기준으로 처리.
- 테스트 구간 정보가 전처리 단계에 섞일 위험을 낮춤.

### 발표에서 반드시 같이 말해야 할 한계
1) **Date 컬럼 의존성**
- 현재 데이터 파일에 Date 컬럼이 없으면 2024/2025를 정확히 잘라내지 못하고 fallback 규칙(마지막 24/12개월)이 적용됨.
- 즉, "연도 고정 분할"의 완전 보장은 Date 컬럼이 있을 때만 가능.

2) **목표 편향 가능성**
- US 가중치/target profile을 강하게 주면 US 성능 개선 대신 JP/KR 균형이 깨질 수 있음.
- 멀티타깃 최적화와 단일 타깃 최적화 간 trade-off가 존재.

3) **구현은 규칙 기반 필터링**
- CN/UK 제외는 graph.csv 원본 수정이 아니라 로딩 단계 필터.
- 실험 재현 시 동일 코드/옵션 사용이 전제됨.

---

## 2. 내일 발표용 3~5분 스크립트

### 1) 문제 정의 (약 40초)
"이번 실험의 목표는 환율 예측에서 US/JP/KR 3개국 축을 안정적으로 예측하는 것입니다. 기존 설정은 평가 시 실제값을 일부 따라가는 구조와 분할 기준의 모호함이 있어, 실제 운용 성능을 과대평가할 수 있는 위험이 있었습니다."

### 2) 핵심 개선점 (약 1분 30초)
"첫째, 그래프 구성에서 CN/UK 환율 노드를 제외해 문제 범위를 US/JP/KR 중심으로 명확히 했습니다. 둘째, 검증/테스트 기간을 2024년과 2025년으로 고정하는 규칙을 도입했습니다. 셋째, Validation/Testing에서 teacher forcing을 금지하고 recursive rollout만 허용해, 모델이 실제값을 따라가지 않도록 했습니다. 넷째, 정규화 스케일을 학습 구간 기준으로 계산하도록 바꿔 데이터 누수 가능성을 줄였습니다."

### 3) 의미 (약 40초)
"이 개선으로 실험이 연구 목적에 더 정합적으로 맞춰졌고, 특히 평가 공정성이 개선되었습니다. 즉, 점수 자체보다 신뢰 가능한 점수를 얻는 기반을 먼저 정리한 작업입니다."

### 4) 남은 과제 (약 30초)
"현재 데이터 파일에 Date 컬럼이 없으면 연도 기준 분할이 fallback으로 처리됩니다. 다음 단계는 Date 컬럼 포함 데이터셋을 확정해 2024/2025 캘린더 분할을 완전 고정하고, US 개선과 JP/KR 유지의 균형을 추가 튜닝으로 맞추는 것입니다."

---

## 3. 예상 질문 & 답변

Q1. "왜 teacher forcing을 평가에서 빼야 하나요?"
- A: 운영 환경에서는 미래 실제값을 모르기 때문에, 평가에서도 모델 예측을 다음 입력으로 넣는 recursive 방식이 더 현실적입니다.

Q2. "2024/2025 분할이 정확히 보장되나요?"
- A: Date 컬럼이 있으면 정확히 보장됩니다. Date가 없으면 마지막 24/12개월 fallback이 적용됩니다.

Q3. "CN/UK를 완전히 제거한 건가요?"
- A: graph.csv 원본은 유지하고, 로딩 단계에서 CN/UK 환율 노드 연결을 제외하도록 처리했습니다.

Q4. "성능이 바로 좋아졌나요?"
- A: 이번 단계의 핵심은 성능 극대화보다 평가 신뢰성 확보입니다. 신뢰성 기반 위에서 추가 튜닝을 진행하는 구조입니다.

---

## 4. 발표 직전 체크리스트

- [ ] 슬라이드에 목적 문장 1개: "US/JP/KR 중심 + 공정 평가"
- [ ] Validation=2024, Testing=2025 규칙 명시
- [ ] recursive 평가(teacher forcing 금지) 그림 1장
- [ ] Date 컬럼 없을 때 fallback 한계 1줄 명시
- [ ] 결론: "점수보다 신뢰 가능한 점수 체계 확립"

---

## 5. 관련 문서
- 운영 규칙: RULES_US_JP_KR_2024_2025.md
- 프로젝트 개요: README.md
